import{i as n,r as c,x as d,j as e}from"./index-DIh5wxCw.js";import{B as l,C as h,a as C,b as y,d as v}from"./card-BVj2mpCd.js";import{I as j}from"./index-CXyJ5PVz.js";import{L as g}from"./label-BOSjw2jr.js";import{F as E,B as b}from"./badge-DwC97fZb.js";import{T as R,a as B,b as P,c as w}from"./tabs-BTboQqcu.js";import{P as F}from"./plus-BlBB68lF.js";const o={getProviders:async()=>(await n.get("/insurance/providers")).data,createProvider:async a=>(await n.post("/insurance/providers",a)).data,updateProvider:async(a,r)=>(await n.put(`/insurance/providers/${a}`,r)).data,deleteProvider:async a=>(await n.delete(`/insurance/providers/${a}`)).data,getClaims:async a=>(await n.get("/insurance/claims",{params:{status:a}})).data,createClaim:async a=>(await n.post("/insurance/claims",a,{headers:{"Content-Type":"multipart/form-data"}})).data,updateClaimStatus:async(a,r,i)=>(await n.put(`/insurance/claims/${a}/status`,{status:r,admin_notes:i})).data},_=()=>{const[a,r]=c.useState([]),[i,f]=c.useState([]),[I,N]=c.useState(!0),[A,m]=c.useState(!1),[t,u]=c.useState({name:"",code:"",email:""});c.useEffect(()=>{p()},[]);const p=async()=>{try{N(!0);const[s,x]=await Promise.all([o.getProviders(),o.getClaims()]);r(s.data||[]),f(x.data||[])}catch(s){console.error(s),d.error("Failed to load insurance data")}finally{N(!1)}},S=async s=>{s.preventDefault();try{await o.createProvider(t),d.success("Provider created"),m(!1),p()}catch{d.error("Error creating provider")}},T=async s=>{try{await o.updateClaimStatus(s,"Approved","Approved via Admin Panel"),d.success("Claim Approved & Bill Paid"),p()}catch{d.error("Error approving claim")}};return e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Insurance Management"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage providers and process claims"})]}),e.jsxs(l,{onClick:()=>m(!0),children:[e.jsx(F,{className:"mr-2 h-4 w-4"})," Add Provider"]})]}),A&&e.jsxs(h,{className:"mb-6 border-blue-200 bg-blue-50/50",children:[e.jsx(C,{children:e.jsx(y,{children:"New Insurance Provider"})}),e.jsx(v,{children:e.jsxs("form",{onSubmit:S,className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx(g,{children:"Name"}),e.jsx(j,{value:t.name,onChange:s=>u({...t,name:s.target.value}),required:!0})]}),e.jsxs("div",{children:[e.jsx(g,{children:"Code"}),e.jsx(j,{value:t.code,onChange:s=>u({...t,code:s.target.value}),required:!0})]}),e.jsxs("div",{children:[e.jsx(g,{children:"Email"}),e.jsx(j,{value:t.email,onChange:s=>u({...t,email:s.target.value})})]}),e.jsxs("div",{className:"col-span-3 flex justify-end gap-2",children:[e.jsx(l,{variant:"outline",onClick:()=>m(!1),children:"Cancel"}),e.jsx(l,{type:"submit",children:"Save Provider"})]})]})})]}),e.jsxs(R,{defaultValue:"claims",children:[e.jsxs(B,{children:[e.jsxs(P,{value:"claims",children:["Claims Requests (",i.filter(s=>s.status==="Pending").length,")"]}),e.jsx(P,{value:"providers",children:"Providers List"})]}),e.jsxs(w,{value:"claims",className:"space-y-4",children:[i.map(s=>e.jsx(h,{children:e.jsxs(v,{className:"p-4 flex justify-between items-center",children:[e.jsxs("div",{className:"flex gap-4 items-center",children:[e.jsx("div",{className:"p-2 bg-blue-100 rounded-full",children:e.jsx(E,{className:"h-6 w-6 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold",children:s.claim_number}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Amount: $",s.amount]}),e.jsxs("p",{className:"text-xs",children:["Notes: ",s.notes]})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(b,{variant:s.status==="Approved"?"default":s.status==="Rejected"?"destructive":"secondary",children:s.status}),s.status==="Pending"&&e.jsxs("div",{className:"flex gap-2",children:[e.jsx(l,{size:"sm",onClick:()=>T(s.id),className:"bg-green-600 hover:bg-green-700",children:"Approve"}),e.jsx(l,{size:"sm",variant:"destructive",children:"Reject"})]})]})]})},s.id)),i.length===0&&e.jsx("p",{className:"text-center text-gray-500 py-10",children:"No claims found."})]}),e.jsx(w,{value:"providers",children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:a.map(s=>e.jsxs(h,{children:[e.jsx(C,{children:e.jsx(y,{className:"text-lg",children:s.name})}),e.jsxs(v,{children:[e.jsxs("p",{className:"text-sm",children:["Code: ",s.code]}),e.jsxs("p",{className:"text-sm",children:["Contact: ",s.contact_number||"N/A"]}),e.jsx(b,{className:"mt-2",variant:s.status==="Active"?"default":"secondary",children:s.status})]})]},s.id))})})]})]})};export{_ as default};
