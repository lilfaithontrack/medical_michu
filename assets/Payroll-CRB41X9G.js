import{c as Q,f as u,d as Ye,r,j as e}from"./index-MFUeX4KC.js";import{c as qe,F as je,S as Ue}from"./AdminLayout-CEyGcOXW.js";import{C as H,d as I,B as h}from"./card--ujVzSXa.js";import{U as Je,I as v,C as We}from"./Combination-CVDpaV-S.js";import{L as p}from"./label-Cw8AwbsX.js";import{T as Ke,a as Qe,b as ye,c as ge}from"./tabs-BKpu8yr4.js";import{D as Y,a as q,b as U,c as J,d as se}from"./dialog-C_l7gpm1.js";import{S as N,a as b,b as w,c as _,d as y}from"./select-CM0PFwtY.js";import{T as fe,a as ve,b as W,c,d as Ne,e as o}from"./table-tgADzikB.js";import{D as Xe}from"./dollar-sign-CM5HpJ7h.js";import{R as Ze}from"./refresh-cw-DbMwhjYY.js";import{P as be}from"./plus-DrrZjkgX.js";import{L as B}from"./loader-circle-DYBsGSuP.js";import{E as Re}from"./eye-CxZXf5Ga.js";import{C as we}from"./credit-card-BwSBlcYN.js";import"./index-lz0iHb9C.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ea=Q("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aa=Q("ListChecks",[["path",{d:"m3 17 2 2 4-4",key:"1jhpwq"}],["path",{d:"m3 7 2 2 4-4",key:"1obspn"}],["path",{d:"M13 6h8",key:"15sg57"}],["path",{d:"M13 12h8",key:"h98zly"}],["path",{d:"M13 18h8",key:"oe0vm4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sa=Q("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ta=Q("Wallet",[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]]),S={getStats:async t=>(await u.get("/payroll/stats",{params:{year:t}})).data,getAll:async t=>(await u.get("/payroll",{params:t})).data,getById:async t=>(await u.get(`/payroll/${t}`)).data,generate:async t=>(await u.post("/payroll/generate",t)).data,bulkGenerate:async(t,n)=>(await u.post("/payroll/bulk-generate",{month:t,year:n})).data,update:async(t,n)=>(await u.put(`/payroll/${t}`,n)).data,approve:async t=>(await u.put(`/payroll/${t}/approve`)).data,markPaid:async(t,n)=>(await u.put(`/payroll/${t}/mark-paid`,n)).data,delete:async t=>(await u.delete(`/payroll/${t}`)).data,getAllSalaryStructures:async t=>(await u.get("/payroll/salary-structures",{params:t})).data,getSalaryStructure:async t=>(await u.get(`/payroll/salary-structures/${t}`)).data,setSalaryStructure:async(t,n)=>(await u.put(`/payroll/salary-structures/${t}`,n)).data},K=["January","February","March","April","May","June","July","August","September","October","November","December"],_e={Draft:"bg-yellow-100 text-yellow-800 border-yellow-200",Approved:"bg-blue-100 text-blue-800 border-blue-200",Paid:"bg-green-100 text-green-800 border-green-200",Cancelled:"bg-red-100 text-red-800 border-red-200"},i=t=>Number(t||0).toLocaleString("en-ET",{minimumFractionDigits:2,maximumFractionDigits:2});function va(){var he,xe,ue,pe;const{toast:t}=Ye(),[n,D]=r.useState("overview"),[Se,te]=r.useState(!0),[d,Ce]=r.useState(null),[le,ke]=r.useState([]),[re,Te]=r.useState([]),[ne,Pe]=r.useState([]),[C,De]=r.useState(String(new Date().getMonth()+1)),[k,Ee]=r.useState(String(new Date().getFullYear())),[M,Ae]=r.useState("all"),[X,Be]=r.useState(""),[Me,F]=r.useState(!1),[Fe,E]=r.useState(!1),[Ge,ie]=r.useState(!1),[$e,G]=r.useState(!1),[l,ce]=r.useState(null),[oe,de]=r.useState(null),[$,L]=r.useState(!1),[O,V]=r.useState(!1),[m,A]=r.useState({staff_id:"",month:String(new Date().getMonth()+1),year:String(new Date().getFullYear()),overtime_hours:"0",absent_days:"0",notes:""}),[g,T]=r.useState({staff_id:"",basic_salary:"",housing_allowance:"0",transport_allowance:"0",medical_allowance:"0",bank_name:"",account_number:"",account_name:""}),[z,Z]=r.useState({payment_date:new Date().toISOString().split("T")[0],payment_method:"Bank Transfer",payment_reference:""}),f=r.useCallback(async()=>{var a,s,x,j;te(!0);try{const[R,ee,ae,P]=await Promise.all([S.getStats(Number(k)),S.getAll({month:C!=="all"?C:void 0,year:k,status:M!=="all"?M:void 0,search:X||void 0}),S.getAllSalaryStructures(),u.get("/staff",{params:{limit:200}})]);Ce((R==null?void 0:R.data)||null),ke(((a=ee==null?void 0:ee.data)==null?void 0:a.data)||[]),Te((ae==null?void 0:ae.data)||[]),Pe(((x=(s=P==null?void 0:P.data)==null?void 0:s.data)==null?void 0:x.data)||((j=P==null?void 0:P.data)==null?void 0:j.data)||[])}catch{t({title:"Error",description:"Failed to load payroll data",variant:"destructive"})}finally{te(!1)}},[C,k,M,X]);r.useEffect(()=>{f()},[f]);const Le=async()=>{var a,s;if(!m.staff_id||!m.month||!m.year){t({title:"Error",description:"Staff, month, and year are required",variant:"destructive"});return}L(!0);try{await S.generate({staff_id:m.staff_id,month:Number(m.month),year:Number(m.year),overtime_hours:Number(m.overtime_hours),absent_days:Number(m.absent_days),notes:m.notes}),t({title:"✅ Payroll Generated",description:"Payslip has been generated successfully"}),F(!1),f()}catch(x){t({title:"Error",description:((s=(a=x==null?void 0:x.response)==null?void 0:a.data)==null?void 0:s.message)||x.message,variant:"destructive"})}finally{L(!1)}},Oe=async()=>{if(!C||C==="all"||!k){t({title:"Select a month and year first",variant:"destructive"});return}L(!0);try{const a=await S.bulkGenerate(Number(C),Number(k)),s=((a==null?void 0:a.data)||[]).filter(j=>j.success).length,x=((a==null?void 0:a.data)||[]).filter(j=>!j.success).length;t({title:"Bulk Generation Done",description:`✅ ${s} generated, ⚠️ ${x} skipped`}),f()}catch{t({title:"Error",description:"Bulk generation failed",variant:"destructive"})}finally{L(!1)}},Ve=async a=>{try{await S.approve(a),t({title:"✅ Approved"}),f()}catch{t({title:"Error",description:"Approval failed",variant:"destructive"})}},ze=async()=>{if(l){V(!0);try{await S.markPaid(l.id,z),t({title:"✅ Marked as Paid"}),G(!1),f()}catch{t({title:"Error",description:"Failed to mark as paid",variant:"destructive"})}finally{V(!1)}}},He=async()=>{if(!g.staff_id||!g.basic_salary){t({title:"Staff and basic salary are required",variant:"destructive"});return}V(!0);try{await S.setSalaryStructure(g.staff_id,g),t({title:"✅ Salary Structure Saved"}),E(!1),f()}catch{t({title:"Error",description:"Failed to save salary structure",variant:"destructive"})}finally{V(!1)}},Ie=a=>{T({staff_id:a.staff_id,basic_salary:String(a.basic_salary),housing_allowance:String(a.housing_allowance),transport_allowance:String(a.transport_allowance),medical_allowance:String(a.medical_allowance),bank_name:a.bank_name||"",account_number:a.account_number||"",account_name:a.account_name||""}),de(a),E(!0)},me=Array.from({length:5},(a,s)=>String(new Date().getFullYear()-s));return e.jsxs(qe,{title:"Payroll Management",subtitle:"Staff salary, payslips, and payment processing",children:[e.jsx("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[{label:"Monthly Net Payroll",value:`ETB ${i((he=d==null?void 0:d.monthly)==null?void 0:he.net)}`,icon:Xe,color:"text-green-500",sub:`${((xe=d==null?void 0:d.monthly)==null?void 0:xe.count)||0} staff`},{label:"Total Annual Gross",value:`ETB ${i((ue=d==null?void 0:d.overall)==null?void 0:ue.total_gross)}`,icon:sa,color:"text-blue-500",sub:`Year ${k}`},{label:"Total Tax (Annual)",value:`ETB ${i((pe=d==null?void 0:d.overall)==null?void 0:pe.total_tax)}`,icon:je,color:"text-orange-500",sub:"Income tax withheld"},{label:"Staff with Salary",value:(d==null?void 0:d.staffWithSalary)||0,icon:Je,color:"text-purple-500",sub:"Active staff"}].map(a=>e.jsx(H,{children:e.jsxs(I,{className:"p-5",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:a.label}),e.jsx(a.icon,{className:`w-5 h-5 ${a.color}`})]}),e.jsx("p",{className:"text-2xl font-bold",children:a.value}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:a.sub})]})},a.label))}),e.jsxs(Ke,{value:n,onValueChange:D,className:"space-y-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 items-start sm:items-center justify-between",children:[e.jsxs(Qe,{children:[e.jsx(ye,{value:"overview",children:"Payroll Records"}),e.jsx(ye,{value:"salary",children:"Salary Structures"})]}),e.jsxs("div",{className:"flex gap-2 flex-wrap",children:[e.jsxs(h,{variant:"outline",size:"sm",className:"gap-2",onClick:f,children:[e.jsx(Ze,{className:"w-4 h-4"})," Refresh"]}),n==="salary"&&e.jsxs(h,{size:"sm",className:"gap-2",onClick:()=>{T({staff_id:"",basic_salary:"",housing_allowance:"0",transport_allowance:"0",medical_allowance:"0",bank_name:"",account_number:"",account_name:""}),de(null),E(!0)},children:[e.jsx(be,{className:"w-4 h-4"})," Set Salary"]}),n==="overview"&&e.jsxs(e.Fragment,{children:[e.jsxs(h,{variant:"outline",size:"sm",className:"gap-2",onClick:Oe,disabled:$,children:[$?e.jsx(B,{className:"w-4 h-4 animate-spin"}):e.jsx(aa,{className:"w-4 h-4"})," Bulk Generate"]}),e.jsxs(h,{size:"sm",className:"gap-2",onClick:()=>F(!0),children:[e.jsx(be,{className:"w-4 h-4"})," Generate Payslip"]})]})]})]}),e.jsxs(ge,{value:"overview",children:[e.jsx(H,{className:"mb-4",children:e.jsx(I,{className:"p-4",children:e.jsxs("div",{className:"flex flex-wrap gap-3",children:[e.jsxs("div",{className:"relative flex-1 min-w-40",children:[e.jsx(Ue,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground"}),e.jsx(v,{placeholder:"Search staff...",className:"pl-9",value:X,onChange:a=>Be(a.target.value)})]}),e.jsxs(N,{value:C,onValueChange:De,children:[e.jsx(b,{className:"w-36",children:e.jsx(w,{})}),e.jsxs(_,{children:[e.jsx(y,{value:"all",children:"All Months"}),K.map((a,s)=>e.jsx(y,{value:String(s+1),children:a},a))]})]}),e.jsxs(N,{value:k,onValueChange:Ee,children:[e.jsx(b,{className:"w-28",children:e.jsx(w,{})}),e.jsx(_,{children:me.map(a=>e.jsx(y,{value:a,children:a},a))})]}),e.jsxs(N,{value:M,onValueChange:Ae,children:[e.jsx(b,{className:"w-36",children:e.jsx(w,{})}),e.jsxs(_,{children:[e.jsx(y,{value:"all",children:"All Status"}),["Draft","Approved","Paid","Cancelled"].map(a=>e.jsx(y,{value:a,children:a},a))]})]})]})})}),e.jsx(H,{children:e.jsx(I,{className:"p-0",children:Se?e.jsx("div",{className:"flex items-center justify-center h-48",children:e.jsx(B,{className:"w-8 h-8 animate-spin text-muted-foreground"})}):le.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center h-48 text-muted-foreground",children:[e.jsx(We,{className:"w-10 h-10 mb-2 opacity-30"}),e.jsx("p",{children:"No payroll records found"})]}):e.jsxs(fe,{children:[e.jsx(ve,{children:e.jsxs(W,{children:[e.jsx(c,{children:"Payroll #"}),e.jsx(c,{children:"Staff"}),e.jsx(c,{children:"Period"}),e.jsx(c,{className:"text-right",children:"Gross"}),e.jsx(c,{className:"text-right",children:"Deductions"}),e.jsx(c,{className:"text-right",children:"Net Pay"}),e.jsx(c,{children:"Status"}),e.jsx(c,{className:"text-right",children:"Actions"})]})}),e.jsx(Ne,{children:le.map(a=>e.jsxs(W,{className:"hover:bg-muted/30",children:[e.jsx(o,{className:"font-mono text-xs",children:a.payroll_number}),e.jsx(o,{children:e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-sm",children:a.staff_name}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[a.role," · ",a.department_name]})]})}),e.jsxs(o,{className:"text-sm",children:[K[a.pay_period_month-1]," ",a.pay_period_year]}),e.jsxs(o,{className:"text-right font-medium",children:["ETB ",i(a.gross_salary)]}),e.jsxs(o,{className:"text-right text-red-600",children:["-ETB ",i(a.total_deductions)]}),e.jsxs(o,{className:"text-right font-bold text-green-700",children:["ETB ",i(a.net_salary)]}),e.jsx(o,{children:e.jsx("span",{className:`inline-flex items-center px-2 py-0.5 rounded text-xs font-medium border ${_e[a.status]}`,children:a.status})}),e.jsx(o,{className:"text-right",children:e.jsxs("div",{className:"flex gap-1 justify-end",children:[e.jsx(h,{variant:"ghost",size:"icon",className:"h-8 w-8",onClick:()=>{ce(a),ie(!0)},children:e.jsx(Re,{className:"w-4 h-4"})}),a.status==="Draft"&&e.jsx(h,{variant:"ghost",size:"icon",className:"h-8 w-8 text-blue-600",title:"Approve",onClick:()=>Ve(a.id),children:e.jsx(ea,{className:"w-4 h-4"})}),a.status==="Approved"&&e.jsx(h,{variant:"ghost",size:"icon",className:"h-8 w-8 text-green-600",title:"Mark Paid",onClick:()=>{ce(a),G(!0)},children:e.jsx(we,{className:"w-4 h-4"})})]})})]},a.id))})]})})})]}),e.jsx(ge,{value:"salary",children:e.jsx(H,{children:e.jsx(I,{className:"p-0",children:re.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center h-48 text-muted-foreground",children:[e.jsx(ta,{className:"w-10 h-10 mb-2 opacity-30"}),e.jsx("p",{children:"No salary structures defined"}),e.jsx("p",{className:"text-xs mt-1",children:'Click "Set Salary" to configure staff salaries'})]}):e.jsxs(fe,{children:[e.jsx(ve,{children:e.jsxs(W,{children:[e.jsx(c,{children:"Staff"}),e.jsx(c,{children:"Role / Dept"}),e.jsx(c,{className:"text-right",children:"Basic"}),e.jsx(c,{className:"text-right",children:"Housing"}),e.jsx(c,{className:"text-right",children:"Transport"}),e.jsx(c,{className:"text-right",children:"Total Package"}),e.jsx(c,{children:"Bank"}),e.jsx(c,{className:"text-right",children:"Action"})]})}),e.jsx(Ne,{children:re.map(a=>{const s=Number(a.basic_salary)+Number(a.housing_allowance)+Number(a.transport_allowance)+Number(a.medical_allowance);return e.jsxs(W,{className:"hover:bg-muted/30",children:[e.jsxs(o,{children:[e.jsx("p",{className:"font-medium text-sm",children:a.staff_name}),e.jsx("p",{className:"text-xs text-muted-foreground",children:a.staff_code})]}),e.jsxs(o,{className:"text-sm",children:[e.jsx("p",{children:a.role}),e.jsx("p",{className:"text-xs text-muted-foreground",children:a.department_name})]}),e.jsxs(o,{className:"text-right",children:["ETB ",i(a.basic_salary)]}),e.jsxs(o,{className:"text-right text-muted-foreground",children:["ETB ",i(a.housing_allowance)]}),e.jsxs(o,{className:"text-right text-muted-foreground",children:["ETB ",i(a.transport_allowance)]}),e.jsxs(o,{className:"text-right font-bold",children:["ETB ",i(s)]}),e.jsx(o,{className:"text-xs text-muted-foreground",children:a.bank_name||"—"}),e.jsx(o,{className:"text-right",children:e.jsx(h,{variant:"ghost",size:"sm",onClick:()=>Ie(a),children:"Edit"})})]},a.id)})})]})})})})]}),e.jsx(Y,{open:Me,onOpenChange:F,children:e.jsxs(q,{className:"max-w-md",children:[e.jsx(U,{children:e.jsx(J,{children:"Generate Payslip"})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(p,{children:"Staff Member *"}),e.jsxs(N,{value:m.staff_id,onValueChange:a=>A(s=>({...s,staff_id:a})),children:[e.jsx(b,{children:e.jsx(w,{placeholder:"Select staff..."})}),e.jsx(_,{children:ne.map(a=>e.jsxs(y,{value:a.id,children:[a.name," — ",a.role]},a.id))})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(p,{children:"Month *"}),e.jsxs(N,{value:m.month,onValueChange:a=>A(s=>({...s,month:a})),children:[e.jsx(b,{children:e.jsx(w,{})}),e.jsx(_,{children:K.map((a,s)=>e.jsx(y,{value:String(s+1),children:a},a))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(p,{children:"Year *"}),e.jsxs(N,{value:m.year,onValueChange:a=>A(s=>({...s,year:a})),children:[e.jsx(b,{children:e.jsx(w,{})}),e.jsx(_,{children:me.map(a=>e.jsx(y,{value:a,children:a},a))})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(p,{children:"Overtime Hours"}),e.jsx(v,{type:"number",min:"0",value:m.overtime_hours,onChange:a=>A(s=>({...s,overtime_hours:a.target.value}))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(p,{children:"Absent Days"}),e.jsx(v,{type:"number",min:"0",value:m.absent_days,onChange:a=>A(s=>({...s,absent_days:a.target.value}))})]})]})]}),e.jsxs(se,{children:[e.jsx(h,{variant:"outline",onClick:()=>F(!1),children:"Cancel"}),e.jsxs(h,{onClick:Le,disabled:$,children:[$?e.jsx(B,{className:"w-4 h-4 animate-spin mr-2"}):null," Generate"]})]})]})}),e.jsx(Y,{open:Fe,onOpenChange:E,children:e.jsxs(q,{className:"max-w-lg",children:[e.jsx(U,{children:e.jsx(J,{children:oe?"Edit Salary Structure":"Set Salary Structure"})}),e.jsxs("div",{className:"space-y-4",children:[!oe&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(p,{children:"Staff Member *"}),e.jsxs(N,{value:g.staff_id,onValueChange:a=>T(s=>({...s,staff_id:a})),children:[e.jsx(b,{children:e.jsx(w,{placeholder:"Select staff..."})}),e.jsx(_,{children:ne.map(a=>e.jsxs(y,{value:a.id,children:[a.name," — ",a.role]},a.id))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(p,{children:"Basic Salary (ETB) *"}),e.jsx(v,{type:"number",min:"0",value:g.basic_salary,onChange:a=>T(s=>({...s,basic_salary:a.target.value}))})]}),e.jsx("div",{className:"grid grid-cols-3 gap-3",children:[["Housing Allowance","housing_allowance"],["Transport Allowance","transport_allowance"],["Medical Allowance","medical_allowance"]].map(([a,s])=>e.jsxs("div",{className:"space-y-2",children:[e.jsx(p,{className:"text-xs",children:a}),e.jsx(v,{type:"number",min:"0",value:g[s],onChange:x=>T(j=>({...j,[s]:x.target.value}))})]},s))}),e.jsx("div",{className:"grid grid-cols-3 gap-3",children:[["Bank Name","bank_name"],["Account Number","account_number"],["Account Name","account_name"]].map(([a,s])=>e.jsxs("div",{className:"space-y-2",children:[e.jsx(p,{className:"text-xs",children:a}),e.jsx(v,{value:g[s],onChange:x=>T(j=>({...j,[s]:x.target.value}))})]},s))})]}),e.jsxs(se,{children:[e.jsx(h,{variant:"outline",onClick:()=>E(!1),children:"Cancel"}),e.jsxs(h,{onClick:He,disabled:O,children:[O?e.jsx(B,{className:"w-4 h-4 animate-spin mr-2"}):null," Save"]})]})]})}),e.jsx(Y,{open:Ge,onOpenChange:ie,children:e.jsxs(q,{className:"max-w-2xl",children:[e.jsx(U,{children:e.jsxs(J,{className:"flex items-center gap-2",children:[e.jsx(je,{className:"w-5 h-5"})," Payslip — ",l==null?void 0:l.payroll_number]})}),l&&e.jsxs("div",{className:"space-y-4 text-sm",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4 p-4 bg-muted/30 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-base",children:l.staff_name}),e.jsxs("p",{className:"text-muted-foreground",children:[l.role," · ",l.department_name]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"font-medium",children:[K[(l.pay_period_month||1)-1]," ",l.pay_period_year]}),e.jsx("span",{className:`inline-flex items-center px-2 py-0.5 rounded text-xs font-medium border ${_e[l.status]}`,children:l.status})]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold mb-2 text-green-700",children:"Earnings"}),e.jsxs("div",{className:"space-y-1",children:[[["Basic Salary",l.basic_salary],["Housing Allowance",l.housing_allowance],["Transport Allowance",l.transport_allowance],["Medical Allowance",l.medical_allowance],["Overtime",l.overtime_amount],["Other Allowances",l.other_allowances]].map(([a,s])=>Number(s)>0?e.jsxs("div",{className:"flex justify-between py-1 border-b border-dashed",children:[e.jsx("span",{className:"text-muted-foreground",children:a}),e.jsxs("span",{children:["ETB ",i(s)]})]},a):null),e.jsxs("div",{className:"flex justify-between py-1 font-bold text-green-700",children:[e.jsx("span",{children:"Gross Salary"}),e.jsxs("span",{children:["ETB ",i(l.gross_salary)]})]})]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold mb-2 text-red-600",children:"Deductions"}),e.jsxs("div",{className:"space-y-1",children:[[["Income Tax",l.income_tax],["Pension (Employee 7%)",l.pension_employee],["Other Deductions",l.other_deductions]].map(([a,s])=>Number(s)>0?e.jsxs("div",{className:"flex justify-between py-1 border-b border-dashed",children:[e.jsx("span",{className:"text-muted-foreground",children:a}),e.jsxs("span",{className:"text-red-600",children:["-ETB ",i(s)]})]},a):null),e.jsxs("div",{className:"flex justify-between py-1 font-bold text-red-600",children:[e.jsx("span",{children:"Total Deductions"}),e.jsxs("span",{children:["-ETB ",i(l.total_deductions)]})]})]})]}),e.jsxs("div",{className:"flex justify-between py-3 px-4 bg-primary/10 rounded-lg font-bold text-lg",children:[e.jsx("span",{children:"Net Pay"}),e.jsxs("span",{className:"text-primary",children:["ETB ",i(l.net_salary)]})]}),e.jsxs("p",{className:"text-xs text-muted-foreground text-center",children:["Employer pension contribution (11%): ETB ",i(l.pension_employer)," — not deducted from salary"]})]})]})}),e.jsx(Y,{open:$e,onOpenChange:G,children:e.jsxs(q,{className:"max-w-md",children:[e.jsx(U,{children:e.jsx(J,{children:"Mark Payroll as Paid"})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"p-3 bg-muted/30 rounded-lg text-sm",children:[e.jsx("p",{className:"font-medium",children:l==null?void 0:l.staff_name}),e.jsxs("p",{className:"text-muted-foreground",children:["Net Pay: ",e.jsxs("span",{className:"font-bold text-green-700",children:["ETB ",i(l==null?void 0:l.net_salary)]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(p,{children:"Payment Date"}),e.jsx(v,{type:"date",value:z.payment_date,onChange:a=>Z(s=>({...s,payment_date:a.target.value}))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(p,{children:"Payment Method"}),e.jsxs(N,{value:z.payment_method,onValueChange:a=>Z(s=>({...s,payment_method:a})),children:[e.jsx(b,{children:e.jsx(w,{})}),e.jsx(_,{children:["Bank Transfer","Cash","Cheque","Mobile Money"].map(a=>e.jsx(y,{value:a,children:a},a))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(p,{children:"Payment Reference"}),e.jsx(v,{placeholder:"Transaction ID, receipt number...",value:z.payment_reference,onChange:a=>Z(s=>({...s,payment_reference:a.target.value}))})]})]}),e.jsxs(se,{children:[e.jsx(h,{variant:"outline",onClick:()=>G(!1),children:"Cancel"}),e.jsxs(h,{onClick:ze,disabled:O,className:"bg-green-600 hover:bg-green-700",children:[O?e.jsx(B,{className:"w-4 h-4 animate-spin mr-2"}):e.jsx(we,{className:"w-4 h-4 mr-2"})," Confirm Payment"]})]})]})})]})}export{va as default};
