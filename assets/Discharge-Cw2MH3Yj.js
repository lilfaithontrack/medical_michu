import{r as n,d as D,j as e}from"./index-DZAlsvLE.js";import{c as y,L as v,e as C,B as S}from"./AdminLayout-D12jS9pN.js";import{C as d,d as o,I as T}from"./card-DfuB3kKO.js";import{T as L,a as _,b as m,c as i,d as A,e as a}from"./table-DSRtfemy.js";import{i as B}from"./admissionService-DJUryvmI.js";import{C as E}from"./circle-check-big-C2wm8AGO.js";import{L as k}from"./loader-circle-ONSjYwRk.js";const q=()=>{const[c,f]=n.useState([]),[x,h]=n.useState(!0),[l,g]=n.useState(""),{toast:p}=D();n.useEffect(()=>{N()},[]);const N=async()=>{var s,t;try{h(!0);const b=((await B.getAll({limit:100})).data||[]).filter(w=>w.status==="Discharged");f(b)}catch(r){p({title:"Error",description:((t=(s=r.response)==null?void 0:s.data)==null?void 0:t.message)||"Failed to load discharges",variant:"destructive"})}finally{h(!1)}},u=c.filter(s=>{var t,r;return((t=s.patient_name)==null?void 0:t.toLowerCase().includes(l.toLowerCase()))||((r=s.admission_number)==null?void 0:r.toLowerCase().includes(l.toLowerCase()))}),j=s=>s?new Date(s).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}):"N/A";return e.jsxs(y,{title:"Discharge",subtitle:"Patient discharge management",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:[e.jsx(d,{children:e.jsx(o,{className:"pt-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Discharged"}),e.jsx("p",{className:"text-3xl font-bold",children:c.length})]}),e.jsx(v,{className:"w-8 h-8 text-muted-foreground"})]})})}),e.jsx(d,{children:e.jsx(o,{className:"pt-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Completed Today"}),e.jsx("p",{className:"text-3xl font-bold text-success",children:c.filter(s=>{const t=new Date().toDateString();return new Date(s.discharge_date).toDateString()===t}).length})]}),e.jsx(E,{className:"w-8 h-8 text-success"})]})})})]}),e.jsx("div",{className:"flex flex-col sm:flex-row gap-4 justify-between mb-6",children:e.jsxs("div",{className:"relative flex-1 max-w-md",children:[e.jsx(C,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground"}),e.jsx(T,{placeholder:"Search discharges...",className:"pl-10",value:l,onChange:s=>g(s.target.value)})]})}),e.jsx(d,{children:e.jsx(o,{className:"p-0",children:x?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx(k,{className:"w-8 h-8 animate-spin text-muted-foreground"})}):e.jsxs(L,{children:[e.jsx(_,{children:e.jsxs(m,{children:[e.jsx(i,{children:"Admission No."}),e.jsx(i,{children:"Patient"}),e.jsx(i,{children:"Admission Date"}),e.jsx(i,{children:"Discharge Date"}),e.jsx(i,{children:"Status"})]})}),e.jsxs(A,{children:[u.map(s=>e.jsxs(m,{children:[e.jsx(a,{className:"font-mono text-sm",children:s.admission_number}),e.jsx(a,{className:"font-medium",children:s.patient_name||"Unknown"}),e.jsx(a,{children:j(s.admission_date)}),e.jsx(a,{children:j(s.discharge_date)}),e.jsx(a,{children:e.jsx(S,{variant:"outline",className:"border-muted text-muted-foreground",children:"Discharged"})})]},s.id)),u.length===0&&!x&&e.jsx(m,{children:e.jsx(a,{colSpan:5,className:"text-center py-8 text-muted-foreground",children:"No discharge records found"})})]})]})})})]})};export{q as default};
