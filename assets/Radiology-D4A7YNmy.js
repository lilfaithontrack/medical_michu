import{c as $e,r as l,d as He,j as e}from"./index-MFUeX4KC.js";import{c as Xe,M as B,B as f,S as ze,r as Ge,D as he,e as xe,f as pe,g as C,T as ue}from"./AdminLayout-CEyGcOXW.js";import{B as h,C as F,d as T}from"./card--ujVzSXa.js";import{I as v}from"./Combination-CVDpaV-S.js";import{L as n}from"./label-Cw8AwbsX.js";import{T as $}from"./textarea-BWkPO5tB.js";import{T as Je,a as Ke,b as H,c as N,d as Qe,e as g}from"./table-tgADzikB.js";import{D as X,a as z,b as G,c as J,e as je,d as K}from"./dialog-C_l7gpm1.js";import{S as x,a as p,b as u,c as j,d as r}from"./select-CM0PFwtY.js";import{r as D,m as k}from"./diagnosticService-BL6bTvox.js";import{p as We}from"./patientService-CtAKoHA_.js";import{d as Ye}from"./doctorService-Cf-rqgNH.js";import{E as ge,D as Ze}from"./DeleteConfirmDialog-Tv4EgB03.js";import{P as Q}from"./plus-DrrZjkgX.js";import{L as W}from"./loader-circle-DYBsGSuP.js";import{E as Y}from"./eye-CxZXf5Ga.js";import{S as ye}from"./square-pen-QpnerZQe.js";import"./index-lz0iHb9C.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const es=$e("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]),ss={Ordered:"bg-info/10 text-info border-info/20",Scheduled:"bg-warning/10 text-warning border-warning/20","In Progress":"bg-warning/10 text-warning border-warning/20",Completed:"bg-success/10 text-success border-success/20",Reported:"bg-success/10 text-success border-success/20",Cancelled:"bg-muted text-muted-foreground border-border"},as=["Ordered","Scheduled","In Progress","Completed","Reported","Cancelled"],ts=["X-Ray","CT Scan","MRI","Ultrasound","Mammography","Fluoroscopy","PET Scan","Bone Density"],is=["Normal","Urgent","STAT"],rs=["Head","Chest","Abdomen","Spine","Pelvis","Upper Extremity","Lower Extremity","Full Body"],ws=()=>{var de,ce;const[fe,ve]=l.useState([]),[E,Ne]=l.useState([]),[be,_e]=l.useState([]),[we,Se]=l.useState([]),[I,Z]=l.useState(!0),[A,Ce]=l.useState(""),[De,b]=l.useState(!1),[Ee,L]=l.useState(!1),[Oe,P]=l.useState(!1),[a,_]=l.useState(null),[w,ee]=l.useState(!1),[M,O]=l.useState(!1),{toast:c}=He(),[Re,R]=l.useState(!1),[q,Fe]=l.useState("orders"),[t,d]=l.useState({patient_id:"",doctor_id:"",exam_type:"",modality:"",body_part:"",laterality:"",priority:"Normal",clinical_indication:"",status:"Ordered",findings:"",impression:"",contrast_info:{type:"",volume:""}}),[se,ae]=l.useState(!1),[V,te]=l.useState(null),[o,y]=l.useState({name:"",type:"Radiology",status:"Operational",location:"",serial_number:""}),[U,ie]=l.useState(null),re=s=>{s?(y({name:s.name,type:s.type,status:s.status,location:s.location||"",serial_number:s.serial_number||""}),ie(s.id)):(y({name:"",type:"Radiology",status:"Operational",location:"",serial_number:""}),ie(null)),R(!0)},Te=async()=>{if(!o.name){c({title:"Error",description:"Name is required",variant:"destructive"});return}try{U?(await k.update(U,o),c({title:"Success",description:"Equipment updated"})):(await k.create(o),c({title:"Success",description:"Equipment added"})),R(!1),S()}catch{c({title:"Error",description:"Failed to save equipment",variant:"destructive"})}},ke=s=>{s.target.files&&s.target.files[0]&&te(s.target.files[0])},Ie=async s=>{if(V)try{ae(!0);const i=await D.uploadImage(s,V);c({title:"Success",description:"Image uploaded successfully"}),te(null),a&&a.id===s&&_(i),S()}catch{c({title:"Error",description:"Failed to upload image",variant:"destructive"})}finally{ae(!1)}};l.useEffect(()=>{S(),Ae()},[]);const S=async()=>{var s,i;try{Z(!0);const[m,oe]=await Promise.all([D.getAll({limit:100}),k.getAll({type:"Radiology"}).then(me=>me.data||me)]);ve(m.data||[]),Ne(Array.isArray(oe)?oe:[])}catch(m){c({title:"Error",description:((i=(s=m.response)==null?void 0:s.data)==null?void 0:i.message)||"Failed to load radiology data",variant:"destructive"})}finally{Z(!1)}},Ae=async()=>{try{const[s,i]=await Promise.all([We.getAll({limit:200}),Ye.getAll({limit:100})]);_e(s.data||[]),Se(i.data||[])}catch(s){console.error("Failed to load lookups:",s)}},le=()=>{d({patient_id:"",doctor_id:"",exam_type:"",modality:"",body_part:"",laterality:"",priority:"Normal",clinical_indication:"",status:"Ordered",findings:"",impression:"",contrast_info:{type:"",volume:""}}),_(null),ee(!1)},Le=()=>{le(),b(!0)},Pe=s=>{_(s),ee(!0),d({patient_id:s.patient_id||"",doctor_id:s.doctor_id||s.ordering_physician_id||"",exam_type:s.exam_type||s.imaging_type||"",modality:s.modality||"X-Ray",body_part:s.body_part||"",laterality:s.laterality||"N/A",priority:s.priority||"Normal",clinical_indication:s.clinical_indication||s.indication||"",status:s.status||"Ordered",findings:s.findings||"",impression:s.impression||"",contrast_info:s.contrast_info||{type:"",volume:""}}),b(!0)},Me=s=>{_(s),L(!0)},qe=s=>{_(s),P(!0)},Ve=async()=>{var s,i;if(!t.patient_id||!t.doctor_id||!t.exam_type){c({title:"Error",description:"Please fill all required fields",variant:"destructive"});return}try{O(!0),w&&a?(await D.update(a.id,t),c({title:"Success",description:"Radiology order updated successfully"})):(await D.create(t),c({title:"Success",description:"Imaging order placed successfully"})),b(!1),le(),S()}catch(m){c({title:"Error",description:((i=(s=m.response)==null?void 0:s.data)==null?void 0:i.message)||"Operation failed",variant:"destructive"})}finally{O(!1)}},Ue=async()=>{var s,i;if(a)try{O(!0),await D.delete(a.id),c({title:"Success",description:"Radiology order cancelled successfully"}),L(!1),_(null),S()}catch(m){c({title:"Error",description:((i=(s=m.response)==null?void 0:s.data)==null?void 0:i.message)||"Failed to delete order",variant:"destructive"})}finally{O(!1)}},ne=fe.filter(s=>{var i,m;return((i=s.patient_name)==null?void 0:i.toLowerCase().includes(A.toLowerCase()))||((m=s.exam_type)==null?void 0:m.toLowerCase().includes(A.toLowerCase()))}),Be=s=>s?new Date(s).toLocaleDateString("en-US",{month:"short",day:"numeric"}):"N/A";return e.jsx(Xe,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Radiology & Imaging"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage radiology orders, results, and equipment"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(h,{onClick:()=>b(!0),children:[e.jsx(Q,{className:"mr-2 h-4 w-4"})," New Order"]}),e.jsxs(h,{variant:"outline",onClick:()=>Fe(q==="orders"?"equipment":"orders"),children:[e.jsx(B,{className:"mr-2 h-4 w-4"}),q==="orders"?"Manage Equipment":"View Orders"]})]})]}),q==="orders"?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:[E.slice(0,4).map(s=>e.jsx(F,{children:e.jsxs(T,{className:"pt-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx(B,{className:"w-6 h-6 text-muted-foreground"}),e.jsx(f,{variant:s.status==="Operational"?"default":"destructive",children:s.status})]}),e.jsx("p",{className:"font-medium",children:s.name}),e.jsx("p",{className:"text-xs text-muted-foreground",children:s.location})]})},s.id)),E.length===0&&!I&&e.jsx(F,{className:"col-span-4",children:e.jsx(T,{className:"pt-4 text-center text-muted-foreground",children:"No equipment data available"})})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-between mb-6",children:[e.jsxs("div",{className:"relative flex-1 max-w-md",children:[e.jsx(ze,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground"}),e.jsx(v,{placeholder:"Search imaging orders...",className:"pl-10",value:A,onChange:s=>Ce(s.target.value)})]}),e.jsxs(h,{className:"gap-2",onClick:Le,children:[e.jsx(Q,{className:"w-4 h-4"}),"New Order"]})]}),e.jsx(F,{children:e.jsx(T,{className:"p-0",children:I?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx(W,{className:"w-8 h-8 animate-spin text-muted-foreground"})}):e.jsxs(Je,{children:[e.jsx(Ke,{children:e.jsxs(H,{children:[e.jsx(N,{children:"Order ID"}),e.jsx(N,{children:"Patient"}),e.jsx(N,{children:"Exam Type"}),e.jsx(N,{children:"Priority"}),e.jsx(N,{children:"Ordered Date"}),e.jsx(N,{children:"Status"}),e.jsx(N,{className:"text-right",children:"Actions"})]})}),e.jsxs(Qe,{children:[ne.map(s=>e.jsxs(H,{className:"group",children:[e.jsx(g,{className:"font-mono text-sm",children:s.order_id}),e.jsx(g,{className:"font-medium",children:s.patient_name||"Unknown"}),e.jsx(g,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ge,{className:"w-4 h-4 text-muted-foreground"}),s.exam_type]})}),e.jsx(g,{children:e.jsx(f,{variant:s.priority==="Urgent"?"destructive":"secondary",children:s.priority||"Normal"})}),e.jsx(g,{children:Be(s.ordered_date||s.created_at)}),e.jsx(g,{children:e.jsx(f,{variant:"outline",className:ss[s.status]||"",children:s.status})}),e.jsx(g,{className:"text-right",children:e.jsxs(he,{children:[e.jsx(xe,{asChild:!0,children:e.jsx(h,{variant:"ghost",size:"icon",className:"opacity-0 group-hover:opacity-100",children:e.jsx(ge,{className:"w-4 h-4"})})}),e.jsxs(pe,{align:"end",children:[e.jsxs(C,{className:"gap-2",onClick:()=>qe(s),children:[e.jsx(Y,{className:"w-4 h-4"})," View Report"]}),e.jsxs(C,{className:"gap-2",onClick:()=>Pe(s),children:[e.jsx(ye,{className:"w-4 h-4"})," Enter Report"]}),e.jsxs(C,{className:"gap-2 text-destructive",onClick:()=>Me(s),children:[e.jsx(ue,{className:"w-4 h-4"})," Cancel"]})]})]})})]},s.id)),ne.length===0&&!I&&e.jsx(H,{children:e.jsx(g,{colSpan:7,className:"text-center py-8 text-muted-foreground",children:"No imaging orders found"})})]})]})})}),e.jsx(X,{open:De,onOpenChange:b,children:e.jsxs(z,{className:"max-w-lg max-h-[90vh] overflow-y-auto",children:[e.jsxs(G,{children:[e.jsx(J,{children:w?"Update Radiology Order":"New Imaging Order"}),e.jsx(je,{children:w?"Update order status and enter report":"Order a new imaging study"})]}),e.jsxs("div",{className:"space-y-4 py-4",children:[!w&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{htmlFor:"patient_id",children:"Patient *"}),e.jsxs(x,{value:t.patient_id,onValueChange:s=>d({...t,patient_id:s}),children:[e.jsx(p,{children:e.jsx(u,{placeholder:"Select patient"})}),e.jsx(j,{className:"max-h-60",children:be.map(s=>e.jsxs(r,{value:s.id,children:[s.name," (",s.patient_id,")"]},s.id))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{htmlFor:"doctor_id",children:"Ordering Physician *"}),e.jsxs(x,{value:t.doctor_id,onValueChange:s=>d({...t,doctor_id:s}),children:[e.jsx(p,{children:e.jsx(u,{placeholder:"Select doctor"})}),e.jsx(j,{className:"max-h-60",children:we.map(s=>e.jsxs(r,{value:s.id,children:["Dr. ",s.name]},s.id))})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{htmlFor:"exam_type",children:"Exam Type *"}),e.jsxs(x,{value:t.exam_type,onValueChange:s=>d({...t,exam_type:s}),children:[e.jsx(p,{children:e.jsx(u,{placeholder:"Select type"})}),e.jsx(j,{children:ts.map(s=>e.jsx(r,{value:s,children:s},s))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{htmlFor:"modality",children:"Modality"}),e.jsxs(x,{value:t.modality,onValueChange:s=>d({...t,modality:s}),children:[e.jsx(p,{children:e.jsx(u,{placeholder:"Select modality"})}),e.jsxs(j,{children:[e.jsx(r,{value:"X-Ray",children:"X-Ray"}),e.jsx(r,{value:"CT",children:"CT Scan"}),e.jsx(r,{value:"MRI",children:"MRI"}),e.jsx(r,{value:"Ultrasound",children:"Ultrasound"})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{htmlFor:"body_part",children:"Body Part"}),e.jsxs(x,{value:t.body_part,onValueChange:s=>d({...t,body_part:s}),children:[e.jsx(p,{children:e.jsx(u,{placeholder:"Select part"})}),e.jsx(j,{children:rs.map(s=>e.jsx(r,{value:s,children:s},s))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{htmlFor:"laterality",children:"Laterality"}),e.jsxs(x,{value:t.laterality,onValueChange:s=>d({...t,laterality:s}),children:[e.jsx(p,{children:e.jsx(u,{placeholder:"Select side"})}),e.jsxs(j,{children:[e.jsx(r,{value:"Left",children:"Left"}),e.jsx(r,{value:"Right",children:"Right"}),e.jsx(r,{value:"Bilateral",children:"Bilateral"}),e.jsx(r,{value:"N/A",children:"N/A"})]})]})]})]}),e.jsxs("div",{className:"space-y-2 border p-3 rounded-md bg-muted/20",children:[e.jsx(n,{children:"Contrast Information"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mt-2",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx(n,{htmlFor:"contrast_type",className:"text-xs",children:"Type"}),e.jsx(v,{id:"contrast_type",placeholder:"e.g. Iodine, Gadolinium",value:((de=t.contrast_info)==null?void 0:de.type)||"",onChange:s=>d({...t,contrast_info:{...t.contrast_info,type:s.target.value}})})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(n,{htmlFor:"contrast_volume",className:"text-xs",children:"Volume (ml)"}),e.jsx(v,{id:"contrast_volume",type:"number",placeholder:"e.g. 50",value:((ce=t.contrast_info)==null?void 0:ce.volume)||"",onChange:s=>d({...t,contrast_info:{...t.contrast_info,volume:s.target.value}})})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{htmlFor:"priority",children:"Priority"}),e.jsxs(x,{value:t.priority,onValueChange:s=>d({...t,priority:s}),children:[e.jsx(p,{children:e.jsx(u,{placeholder:"Select priority"})}),e.jsx(j,{children:is.map(s=>e.jsx(r,{value:s,children:s},s))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{htmlFor:"clinical_indication",children:"Clinical Indication"}),e.jsx($,{id:"clinical_indication",value:t.clinical_indication,onChange:s=>d({...t,clinical_indication:s.target.value}),placeholder:"Reason for imaging",rows:2})]})]}),w&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{htmlFor:"status",children:"Status"}),e.jsxs(x,{value:t.status,onValueChange:s=>d({...t,status:s}),children:[e.jsx(p,{children:e.jsx(u,{placeholder:"Select status"})}),e.jsx(j,{children:as.map(s=>e.jsx(r,{value:s,children:s},s))})]})]}),e.jsxs("div",{className:"space-y-2 border p-3 rounded-md bg-muted/20",children:[e.jsx(n,{children:"Diagnostic Images"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(v,{type:"file",accept:"image/*",onChange:ke,className:"bg-white"}),e.jsx(h,{variant:"secondary",size:"sm",disabled:!V||se,onClick:()=>a&&Ie(a.id),children:se?e.jsx(W,{className:"w-4 h-4 animate-spin"}):e.jsx(es,{className:"w-4 h-4"})})]}),(a==null?void 0:a.image_paths)&&e.jsx("div",{className:"flex gap-2 mt-2 overflow-x-auto py-2",children:(typeof a.image_paths=="string"?JSON.parse(a.image_paths):a.image_paths).map((s,i)=>e.jsxs("div",{className:"relative group border rounded overflow-hidden w-20 h-20 flex-shrink-0",children:[e.jsx("img",{src:`http://localhost:5000/${s}`,alt:"Scan",className:"w-full h-full object-cover"}),e.jsx("a",{href:`http://localhost:5000/${s}`,target:"_blank",rel:"noreferrer",className:"absolute inset-0 bg-black/50 hidden group-hover:flex items-center justify-center text-white",children:e.jsx(Y,{className:"w-4 h-4"})})]},i))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{htmlFor:"findings",children:"Findings"}),e.jsx($,{id:"findings",value:t.findings,onChange:s=>d({...t,findings:s.target.value}),placeholder:"Describe findings from the imaging study",rows:4})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{htmlFor:"impression",children:"Impression"}),e.jsx($,{id:"impression",value:t.impression,onChange:s=>d({...t,impression:s.target.value}),placeholder:"Summary impression/diagnosis",rows:2})]})]})]}),e.jsxs(K,{children:[e.jsx(h,{variant:"outline",onClick:()=>b(!1),children:"Cancel"}),e.jsxs(h,{onClick:Ve,disabled:M,children:[M&&e.jsx(W,{className:"w-4 h-4 mr-2 animate-spin"}),w?"Save Report":"Place Order"]})]})]})}),e.jsx(X,{open:Oe,onOpenChange:P,children:e.jsxs(z,{className:"max-w-3xl max-h-[90vh] overflow-y-auto",children:[e.jsxs(G,{children:[e.jsx(J,{children:"Radiology Report"}),e.jsxs(je,{children:["Order ID: ",a==null?void 0:a.order_id," | Status: ",e.jsx(f,{variant:"outline",children:a==null?void 0:a.status})]})]}),a&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4 border-b pb-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-semibold text-muted-foreground",children:"Patient"}),e.jsx("p",{className:"font-medium",children:a.patient_name}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["ID: ",a.patient_code]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-semibold text-muted-foreground",children:"Ordering Physician"}),e.jsxs("p",{className:"font-medium",children:["Dr. ",a.physician_name||"Unknown"]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 border-b pb-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-semibold text-muted-foreground",children:"Type"}),e.jsx("p",{children:a.imaging_type||a.exam_type})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-semibold text-muted-foreground",children:"Modality"}),e.jsx("p",{children:a.modality||"X-Ray"})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-semibold text-muted-foreground",children:"Body Part"}),e.jsxs("p",{children:[a.body_part||"N/A"," (",a.laterality||"N/A",")"]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-semibold text-muted-foreground",children:"Priority"}),e.jsx(f,{variant:a.priority==="Urgent"?"destructive":"secondary",children:a.priority||"Normal"})]})]}),e.jsxs("div",{className:"space-y-2 border-b pb-4",children:[e.jsx("h4",{className:"text-sm font-semibold text-muted-foreground",children:"Clinical Indication"}),e.jsx("p",{className:"text-sm",children:a.indication||a.clinical_indication||"None provided"}),a.contrast_info&&a.contrast_info.type&&e.jsxs("div",{className:"mt-2 text-sm bg-muted/20 p-2 rounded",children:[e.jsx("span",{className:"font-semibold",children:"Contrast:"})," ",a.contrast_info.type," (",a.contrast_info.volume||"N/A"," ml)"]})]}),(a.image_paths||a.image_urls)&&e.jsxs("div",{className:"space-y-2 border-b pb-4",children:[e.jsx("h4",{className:"text-sm font-semibold text-muted-foreground",children:"Diagnostic Images"}),e.jsx("div",{className:"flex gap-2 overflow-x-auto py-2",children:(()=>{let s=[];try{typeof a.image_paths=="string"?s=JSON.parse(a.image_paths):Array.isArray(a.image_paths)?s=a.image_paths:typeof a.image_urls=="string"?s=JSON.parse(a.image_urls):Array.isArray(a.image_urls)&&(s=a.image_urls)}catch{s=[]}return s.length>0?s.map((i,m)=>e.jsxs("div",{className:"relative group border rounded overflow-hidden w-32 h-32 flex-shrink-0",children:[e.jsx("img",{src:`http://localhost:5000/${i}`,alt:`Scan ${m+1}`,className:"w-full h-full object-cover"}),e.jsx("a",{href:`http://localhost:5000/${i}`,target:"_blank",rel:"noreferrer",className:"absolute inset-0 bg-black/50 hidden group-hover:flex items-center justify-center text-white",children:e.jsx(Y,{className:"w-6 h-6"})})]},m)):e.jsx("p",{className:"text-sm text-muted-foreground italic",children:"No images attached"})})()})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-semibold text-muted-foreground",children:"Findings"}),e.jsx("p",{className:"text-sm whitespace-pre-wrap mt-1 p-3 bg-muted/10 rounded-md min-h-[100px]",children:a.findings||"No findings entered."})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-semibold text-muted-foreground",children:"Impression"}),e.jsx("p",{className:"text-sm font-medium whitespace-pre-wrap mt-1 p-3 bg-muted/10 rounded-md",children:a.impression||"No impression entered."})]})]})]}),e.jsx(K,{children:e.jsx(h,{onClick:()=>P(!1),children:"Close"})})]})}),e.jsx(Ze,{open:Ee,onOpenChange:L,onConfirm:Ue,title:"Cancel Imaging Order",description:`Are you sure you want to cancel the ${a==null?void 0:a.exam_type} order for ${a==null?void 0:a.patient_name}?`,loading:M})]}):e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center bg-muted/20 p-4 rounded-lg border",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Equipment Inventory"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Manage radiology machines and their operational status"})]}),e.jsxs(h,{onClick:()=>{re()},children:[e.jsx(Q,{className:"mr-2 h-4 w-4"})," Add Equipment"]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:E.length===0?e.jsxs("div",{className:"col-span-3 text-center py-12 bg-white rounded-lg border border-dashed",children:[e.jsx(B,{className:"h-12 w-12 mx-auto text-muted-foreground opacity-50 mb-3"}),e.jsx("h3",{className:"text-lg font-medium",children:"No Equipment Found"}),e.jsx("p",{className:"text-muted-foreground",children:"Add your first radiology machine to get started."})]}):E.map(s=>e.jsx(F,{className:"hover:shadow-md transition-shadow",children:e.jsxs(T,{className:"p-4",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h3",{className:"font-bold text-lg",children:s.name}),e.jsx(f,{variant:"outline",children:s.type})]}),e.jsx(f,{variant:s.status==="Operational"?"default":s.status==="Maintenance"?"secondary":"destructive",className:"mt-2",children:s.status})]}),e.jsxs(he,{children:[e.jsx(xe,{asChild:!0,children:e.jsx(h,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0",children:e.jsx(ge,{className:"w-4 h-4"})})}),e.jsxs(pe,{align:"end",children:[e.jsxs(C,{onClick:()=>{re(s)},children:[e.jsx(ye,{className:"mr-2 h-4 w-4"})," Edit Details"]}),e.jsxs(C,{className:"text-red-600",onClick:async()=>{confirm("Delete equipment?")&&(await k.delete(s.id),S())},children:[e.jsx(ue,{className:"mr-2 h-4 w-4"})," Delete"]})]})]})]}),e.jsxs("div",{className:"mt-4 space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between py-1 border-b",children:[e.jsx("span",{className:"text-muted-foreground",children:"Location:"}),e.jsx("span",{className:"font-medium",children:s.location||"N/A"})]}),e.jsxs("div",{className:"flex justify-between py-1 border-b",children:[e.jsx("span",{className:"text-muted-foreground",children:"Serial No:"}),e.jsx("span",{className:"font-mono text-xs",children:s.serial_number||"N/A"})]}),e.jsxs("div",{className:"flex justify-between py-1 border-b",children:[e.jsx("span",{className:"text-muted-foreground",children:"Last Service:"}),e.jsx("span",{children:s.last_maintenance_date?new Date(s.last_maintenance_date).toLocaleDateString():"N/A"})]})]})]})},s.id))}),e.jsx(X,{open:Re,onOpenChange:R,children:e.jsxs(z,{children:[e.jsx(G,{children:e.jsx(J,{children:U?"Edit Equipment":"Add New Equipment"})}),e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{children:"Name"}),e.jsx(v,{value:o.name,onChange:s=>y({...o,name:s.target.value}),placeholder:"E.g. MRI Scanner 1"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{children:"Type"}),e.jsxs(x,{value:o.type,onValueChange:s=>y({...o,type:s}),children:[e.jsx(p,{children:e.jsx(u,{})}),e.jsxs(j,{children:[e.jsx(r,{value:"Radiology",children:"Radiology"}),e.jsx(r,{value:"Lab",children:"Lab"}),e.jsx(r,{value:"Operation Theater",children:"Operation Theater"}),e.jsx(r,{value:"General",children:"General"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{children:"Status"}),e.jsxs(x,{value:o.status,onValueChange:s=>y({...o,status:s}),children:[e.jsx(p,{children:e.jsx(u,{})}),e.jsxs(j,{children:[e.jsx(r,{value:"Operational",children:"Operational"}),e.jsx(r,{value:"Maintenance",children:"Maintenance"}),e.jsx(r,{value:"Broken",children:"Broken"}),e.jsx(r,{value:"Decommissioned",children:"Decommissioned"})]})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{children:"Location"}),e.jsx(v,{value:o.location,onChange:s=>y({...o,location:s.target.value}),placeholder:"Room number or wing"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{children:"Serial Number"}),e.jsx(v,{value:o.serial_number,onChange:s=>y({...o,serial_number:s.target.value}),placeholder:"Manufacturer Serial No."})]})]}),e.jsxs(K,{children:[e.jsx(h,{variant:"outline",onClick:()=>R(!1),children:"Cancel"}),e.jsx(h,{onClick:Te,children:"Save Equipment"})]})]})})]})]})})};export{ws as default};
