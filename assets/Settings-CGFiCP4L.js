import{c as C,f as r,b as U,d as q,r as d,j as e}from"./index-BM0IHp2M.js";import{c as L,l as B,m as T,n as D}from"./AdminLayout-CWUWmsnS.js";import{C as o,a as m,b as h,d as p,B as A}from"./card-DeprxXCB.js";import{S as F,I as c}from"./Combination-DWTH6IhY.js";import{L as l}from"./label-PzrI3jAD.js";import{S as J}from"./separator-DBuYGobr.js";import{S as K}from"./switch-Cai_3vKN.js";import{T as O,a as Q,b as x,c as g}from"./tabs-DApUIZ-m.js";import{L as V}from"./loader-circle-aBlEtCJL.js";import{C as H}from"./credit-card-Cm7rqDX_.js";import"./index-yV4U6faZ.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R=C("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W=C("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X=C("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]),I={getAll:async()=>(await r.get("/settings")).data,getByCategory:async a=>(await r.get(`/settings/category/${a}`)).data,getAsMap:async()=>(await r.get("/settings/map")).data,get:async a=>(await r.get(`/settings/${a}`)).data,bulkUpdate:async a=>(await r.put("/settings",{settings:a})).data,set:async(a,i)=>(await r.put(`/settings/${a}`,{value:i})).data},de=()=>{var P;const{user:a}=U(),{toast:i}=q(),[S,b]=d.useState(!0),[k,_]=d.useState(!1),[$,z]=d.useState([]),[u,M]=d.useState({}),[f,N]=d.useState({current:"",newPass:"",confirm:""});d.useEffect(()=>{v()},[]);const v=async()=>{try{b(!0);const s=await I.getAll(),t=(s==null?void 0:s.data)||[];z(t);const y={};t.forEach(E=>{y[E.setting_key]=E.setting_value}),M(y)}catch{i({title:"Error",description:"Failed to load settings",variant:"destructive"})}finally{b(!1)}},w=(s,t)=>{M(y=>({...y,[s]:t}))},G=async()=>{try{_(!0),await I.bulkUpdate(u),i({title:"âœ… Settings Saved",description:"All changes have been saved successfully"}),v()}catch{i({title:"Error",description:"Failed to save settings",variant:"destructive"})}finally{_(!1)}},n=s=>$.filter(t=>t.category===s),j=s=>{switch(s.data_type){case"boolean":return e.jsxs("div",{className:"flex items-center justify-between py-3",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(l,{className:"text-sm font-medium",children:s.description||s.setting_key}),e.jsx("p",{className:"text-xs text-muted-foreground",children:s.setting_key})]}),e.jsx(K,{checked:u[s.setting_key]==="true",onCheckedChange:t=>w(s.setting_key,String(t))})]},s.setting_key);case"number":return e.jsxs("div",{className:"space-y-2 py-2",children:[e.jsx(l,{className:"text-sm",children:s.description||s.setting_key}),e.jsx(c,{type:"number",value:u[s.setting_key]||"",onChange:t=>w(s.setting_key,t.target.value)})]},s.setting_key);default:return e.jsxs("div",{className:"space-y-2 py-2",children:[e.jsx(l,{className:"text-sm",children:s.description||s.setting_key}),e.jsx(c,{value:u[s.setting_key]||"",onChange:t=>w(s.setting_key,t.target.value)})]},s.setting_key)}};return S?e.jsx(L,{title:"Settings",subtitle:"Manage your account and preferences",children:e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx(V,{className:"w-8 h-8 animate-spin text-muted-foreground"})})}):e.jsx(L,{title:"Settings",subtitle:"Manage hospital and system configuration",children:e.jsxs("div",{className:"max-w-4xl",children:[e.jsxs(O,{defaultValue:"hospital",className:"space-y-6",children:[e.jsxs(Q,{className:"grid w-full grid-cols-5",children:[e.jsxs(x,{value:"hospital",className:"gap-1.5",children:[e.jsx(B,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden lg:inline",children:"Hospital"})]}),e.jsxs(x,{value:"billing",className:"gap-1.5",children:[e.jsx(H,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden lg:inline",children:"Billing"})]}),e.jsxs(x,{value:"notifications",className:"gap-1.5",children:[e.jsx(T,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden lg:inline",children:"Alerts"})]}),e.jsxs(x,{value:"system",className:"gap-1.5",children:[e.jsx(R,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden lg:inline",children:"System"})]}),e.jsxs(x,{value:"security",className:"gap-1.5",children:[e.jsx(F,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden lg:inline",children:"Security"})]})]}),e.jsx(g,{value:"hospital",children:e.jsxs(o,{children:[e.jsx(m,{children:e.jsxs(h,{className:"flex items-center gap-2",children:[e.jsx(B,{className:"w-5 h-5"})," Hospital Information"]})}),e.jsxs(p,{className:"space-y-1",children:[n("hospital").map(s=>j(s)),n("hospital").length===0&&e.jsx("p",{className:"text-sm text-muted-foreground py-4",children:"No hospital settings found."})]})]})}),e.jsx(g,{value:"billing",children:e.jsxs(o,{children:[e.jsx(m,{children:e.jsxs(h,{className:"flex items-center gap-2",children:[e.jsx(H,{className:"w-5 h-5"})," Billing Configuration"]})}),e.jsxs(p,{className:"space-y-1",children:[n("billing").map(s=>j(s)),n("billing").length===0&&e.jsx("p",{className:"text-sm text-muted-foreground py-4",children:"No billing settings found."})]})]})}),e.jsx(g,{value:"notifications",children:e.jsxs(o,{children:[e.jsx(m,{children:e.jsxs(h,{className:"flex items-center gap-2",children:[e.jsx(T,{className:"w-5 h-5"})," Notification Preferences"]})}),e.jsxs(p,{className:"space-y-0",children:[n("notifications").map((s,t)=>e.jsxs("div",{children:[j(s),t<n("notifications").length-1&&e.jsx(J,{})]},s.setting_key)),n("notifications").length===0&&e.jsx("p",{className:"text-sm text-muted-foreground py-4",children:"No notification settings found."})]})]})}),e.jsx(g,{value:"system",children:e.jsxs(o,{children:[e.jsx(m,{children:e.jsxs(h,{className:"flex items-center gap-2",children:[e.jsx(R,{className:"w-5 h-5"})," System Configuration"]})}),e.jsxs(p,{className:"space-y-1",children:[n("system").map(s=>j(s)),n("system").length===0&&e.jsx("p",{className:"text-sm text-muted-foreground py-4",children:"No system settings found."})]})]})}),e.jsx(g,{value:"security",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs(o,{children:[e.jsx(m,{children:e.jsxs(h,{className:"flex items-center gap-2",children:[e.jsx(D,{className:"w-5 h-5"})," Profile"]})}),e.jsx(p,{className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{children:"Email"}),e.jsx(c,{value:(a==null?void 0:a.email)||"",disabled:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{children:"Role"}),e.jsx(c,{value:typeof(a==null?void 0:a.role)=="string"?a.role:((P=a==null?void 0:a.role)==null?void 0:P.name)||"",disabled:!0})]})]})})]}),e.jsxs(o,{children:[e.jsx(m,{children:e.jsxs(h,{className:"flex items-center gap-2",children:[e.jsx(F,{className:"w-5 h-5"})," Change Password"]})}),e.jsxs(p,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{children:"Current Password"}),e.jsx(c,{type:"password",placeholder:"Enter current password",value:f.current,onChange:s=>N(t=>({...t,current:s.target.value}))})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{children:"New Password"}),e.jsx(c,{type:"password",placeholder:"Enter new password",value:f.newPass,onChange:s=>N(t=>({...t,newPass:s.target.value}))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{children:"Confirm Password"}),e.jsx(c,{type:"password",placeholder:"Confirm new password",value:f.confirm,onChange:s=>N(t=>({...t,confirm:s.target.value}))})]})]})]})]})]})})]}),e.jsxs("div",{className:"flex items-center justify-between mt-6 pt-4 border-t",children:[e.jsxs(A,{variant:"outline",className:"gap-2",onClick:v,children:[e.jsx(W,{className:"w-4 h-4"})," Reset"]}),e.jsxs(A,{className:"gap-2",onClick:G,disabled:k,children:[k?e.jsx(V,{className:"w-4 h-4 animate-spin"}):e.jsx(X,{className:"w-4 h-4"}),"Save all changes"]})]})]})})};export{de as default};
