import{k as S,u as E,r as o,d as B,j as e}from"./index-MFUeX4KC.js";import{c as x,U as g,B as T,d as I,C as L}from"./AdminLayout-CEyGcOXW.js";import{B as v,C as c,d as n,a as m,b as u,c as M}from"./card--ujVzSXa.js";import{T as k,a as F,b as j,c as h}from"./tabs-BKpu8yr4.js";import{p as b}from"./patientService-CtAKoHA_.js";import{L as H}from"./loader-circle-DYBsGSuP.js";import{A as f}from"./arrow-left-DDBq1rXy.js";import{H as R}from"./heart-CDyTCbUc.js";import{P as N}from"./phone-VoJjni2s.js";import{M as V}from"./mail-4rTgAP42.js";import{M as G}from"./map-pin-B6CCVmir.js";import{S as $,A as U}from"./Combination-CVDpaV-S.js";const s=({label:r,value:i,icon:a})=>e.jsxs("div",{className:"space-y-1",children:[e.jsxs("p",{className:"text-sm font-medium text-muted-foreground flex items-center gap-2",children:[a&&e.jsx(a,{className:"w-4 h-4"}),r]}),i?e.jsx("p",{className:"text-sm font-medium",children:i}):e.jsx("p",{className:"text-sm font-bold text-red-500",children:"null"})]}),ae=()=>{const{id:r}=S(),i=E(),[a,y]=o.useState(null),[l,_]=o.useState(null),[P,p]=o.useState(!0),{toast:C}=B();o.useEffect(()=>{r&&w()},[r]);const w=async()=>{try{p(!0);const[t,d]=await Promise.allSettled([b.getById(r),b.getInsurance(r)]);if(t.status==="fulfilled")y(t.value||null);else throw new Error("Failed to load patient");if(d.status==="fulfilled"){const D=Array.isArray(d.value)?d.value[0]:d.value;_(D||null)}}catch{C({title:"Error",description:"Failed to load patient details",variant:"destructive"})}finally{p(!1)}};if(P)return e.jsx(x,{title:"Loading...",children:e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx(H,{className:"w-8 h-8 animate-spin text-muted-foreground"})})});if(!a)return e.jsx(x,{title:"Patient Not Found",children:e.jsxs("div",{className:"flex flex-col items-center justify-center h-64",children:[e.jsx("p",{className:"text-muted-foreground mb-4",children:"Patient not found"}),e.jsxs(v,{onClick:()=>i("/patients"),children:[e.jsx(f,{className:"w-4 h-4 mr-2"}),"Back to Patients"]})]})});const A=t=>{switch(t){case"Active":return"bg-success/10 text-success";case"Critical":return"bg-destructive/10 text-destructive";case"Discharged":return"bg-muted text-muted-foreground";default:return"bg-muted text-muted-foreground"}};return e.jsx(x,{title:"Patient Details",subtitle:a.name,children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs(v,{variant:"ghost",onClick:()=>i("/patients"),className:"mb-4",children:[e.jsx(f,{className:"w-4 h-4 mr-2"}),"Back to Patients"]}),e.jsx(c,{children:e.jsx(n,{className:"p-6",children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-6",children:[e.jsx("div",{className:"w-24 h-24 rounded-full bg-primary/10 flex items-center justify-center flex-shrink-0",children:e.jsx(g,{className:"w-12 h-12 text-primary"})}),e.jsxs("div",{className:"flex-1 space-y-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:a.name}),e.jsx("p",{className:"text-muted-foreground",children:a.patient_id}),e.jsx(T,{className:`mt-2 ${A(a.status)}`,children:a.status})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 pt-4 border-t",children:[e.jsx(s,{label:"Age",value:a.age?`${a.age} years`:null,icon:I}),e.jsx(s,{label:"Gender",value:a.gender,icon:g}),e.jsx(s,{label:"Blood Group",value:a.blood_group,icon:R}),e.jsx(s,{label:"Phone",value:a.phone,icon:N}),e.jsx(s,{label:"Email",value:a.email,icon:V}),e.jsx(s,{label:"Last Visit",value:a.lastVisit,icon:L})]})]})]})})}),e.jsxs(k,{defaultValue:"details",className:"space-y-4",children:[e.jsxs(F,{children:[e.jsx(j,{value:"details",children:"Address & Personal"}),e.jsx(j,{value:"insurance",children:"Insurance"}),e.jsx(j,{value:"medical",children:"Medical & Emergency"})]}),e.jsx(h,{value:"details",children:e.jsxs(c,{children:[e.jsx(m,{children:e.jsxs(u,{className:"flex items-center gap-2",children:[e.jsx(G,{className:"w-5 h-5"})," Address Details"]})}),e.jsx(n,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsx(s,{label:"Region",value:a.region}),e.jsx(s,{label:"Subcity / Zone",value:a.subcity}),e.jsx(s,{label:"Woreda",value:a.woreda}),e.jsx(s,{label:"House Number",value:a.house_number}),e.jsx(s,{label:"Full Address",value:a.address})]})})]})}),e.jsx(h,{value:"insurance",children:e.jsxs(c,{children:[e.jsxs(m,{children:[e.jsxs(u,{className:"flex items-center gap-2",children:[e.jsx($,{className:"w-5 h-5"})," Insurance Information"]}),e.jsx(M,{children:"Policy and Coverage Details"})]}),e.jsxs(n,{className:"space-y-6",children:[!l&&e.jsxs("div",{className:"p-4 border rounded bg-muted/20",children:[e.jsx("p",{children:"No detailed insurance record found."}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mt-2",children:[e.jsx(s,{label:"Provider (Basic)",value:a.insurance_provider}),e.jsx(s,{label:"Policy # (Basic)",value:a.insurance_policy_number})]})]}),l&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsx(s,{label:"Provider",value:l.provider_id})," ",e.jsx(s,{label:"Policy Number",value:l.policy_number}),e.jsx(s,{label:"Member ID",value:l.member_id}),e.jsx(s,{label:"Group Number",value:l.group_number}),e.jsx(s,{label:"Plan Type",value:l.plan_type}),e.jsx(s,{label:"Coverage Type",value:l.coverage_type})]}),e.jsxs("div",{className:"border-t pt-4",children:[e.jsx("h4",{className:"font-semibold mb-3",children:"Dates & Status"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsx(s,{label:"Policy Start",value:l.policy_start_date}),e.jsx(s,{label:"Policy Expiry",value:l.policy_expiry_date}),e.jsx(s,{label:"Verification Status",value:l.verification_status})]})]}),e.jsxs("div",{className:"border-t pt-4",children:[e.jsx("h4",{className:"font-semibold mb-3",children:"Financials"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsx(s,{label:"Coverage %",value:l.coverage_percentage?`${l.coverage_percentage}%`:null}),e.jsx(s,{label:"Deductible",value:l.deductible_amount}),e.jsx(s,{label:"Co-pay",value:l.copay}),e.jsx(s,{label:"Max Limit",value:l.max_coverage_limit})]})]}),e.jsxs("div",{className:"border-t pt-4",children:[e.jsx("h4",{className:"font-semibold mb-3",children:"Employer Info"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsx(s,{label:"Company",value:l.employer_company_name}),e.jsx(s,{label:"Employee ID",value:l.employee_id}),e.jsx(s,{label:"Contact",value:l.employer_contact})]})]})]})]})]})}),e.jsx(h,{value:"medical",children:e.jsxs("div",{className:"grid gap-6",children:[e.jsxs(c,{children:[e.jsx(m,{children:e.jsxs(u,{className:"flex items-center gap-2",children:[e.jsx(U,{className:"w-5 h-5"})," Medical Profile"]})}),e.jsx(n,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(s,{label:"Allergies",value:a.allergies}),e.jsx(s,{label:"Medical History",value:a.medical_history})]})})]}),e.jsxs(c,{children:[e.jsx(m,{children:e.jsxs(u,{className:"flex items-center gap-2",children:[e.jsx(N,{className:"w-5 h-5"})," Emergency Contact"]})}),e.jsx(n,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(s,{label:"Name",value:a.emergency_contact_name}),e.jsx(s,{label:"Phone",value:a.emergency_contact_phone})]})})]})]})})]})]})})};export{ae as default};
