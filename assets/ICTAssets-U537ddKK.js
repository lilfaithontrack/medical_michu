import{R as A,j as e,r as h,d as S}from"./index-DIh5wxCw.js";import{b as w,M as C,m as T}from"./AdminLayout-CVdM3u-8.js";import{i as p}from"./ictService-BhDKOsZs.js";import{B as o,C as k,a as F,b as I,d as E}from"./card-BVj2mpCd.js";import{B as M}from"./badge-DwC97fZb.js";import{u as _}from"./index.esm-DrJAPi1Y.js";import{D as B,a as R,b as q,c as V,d as L,T as P}from"./dialog-CmLsLM44.js";import{I as j}from"./index-CXyJ5PVz.js";import{L as n}from"./label-BOSjw2jr.js";import{S as g,a as v,b as N,c as y,d as t}from"./select-DxzT1k0b.js";import{P as H}from"./plus-BlBB68lF.js";import"./Combination-B3qkWEI7.js";import"./index-lGeLsNXG.js";function z({open:l,onOpenChange:m,initialData:r,onSubmit:i}){const{register:a,handleSubmit:u,reset:d,setValue:c,formState:{errors:f,isSubmitting:x}}=_();return A.useEffect(()=>{l&&d(r||{status:"Active",type:"Desktop"})},[l,r,d]),e.jsx(B,{open:l,onOpenChange:m,children:e.jsxs(R,{children:[e.jsx(q,{children:e.jsx(V,{children:r?"Edit Asset":"Add New Asset"})}),e.jsxs("form",{onSubmit:u(i),className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{children:"Asset Type"}),e.jsxs(g,{onValueChange:s=>c("type",s),defaultValue:(r==null?void 0:r.type)||"Desktop",children:[e.jsx(v,{children:e.jsx(N,{placeholder:"Type"})}),e.jsxs(y,{children:[e.jsx(t,{value:"Laptop",children:"Laptop"}),e.jsx(t,{value:"Desktop",children:"Desktop"}),e.jsx(t,{value:"Server",children:"Server"}),e.jsx(t,{value:"Printer",children:"Printer"}),e.jsx(t,{value:"Mobile",children:"Mobile Device"}),e.jsx(t,{value:"Network",children:"Network Gear"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{htmlFor:"brand",children:"Brand"}),e.jsx(j,{id:"brand",...a("brand",{required:"Brand is required"})})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{htmlFor:"model",children:"Model"}),e.jsx(j,{id:"model",...a("model",{required:"Model is required"})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{htmlFor:"serial_number",children:"Serial Number"}),e.jsx(j,{id:"serial_number",...a("serial_number",{required:"Serial # is required"})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{htmlFor:"assigned_to",children:"Assigned To (Staff Name/ID)"}),e.jsx(j,{id:"assigned_to",...a("assigned_to"),placeholder:"Unassigned"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{children:"Status"}),e.jsxs(g,{onValueChange:s=>c("status",s),defaultValue:(r==null?void 0:r.status)||"Active",children:[e.jsx(v,{children:e.jsx(N,{placeholder:"Status"})}),e.jsxs(y,{children:[e.jsx(t,{value:"Active",children:"Active"}),e.jsx(t,{value:"Repair",children:"In Repair"}),e.jsx(t,{value:"Storage",children:"In Storage"}),e.jsx(t,{value:"Retired",children:"Retired"})]})]})]}),e.jsxs(L,{children:[e.jsx(o,{type:"button",variant:"outline",onClick:()=>m(!1),children:"Cancel"}),e.jsx(o,{type:"submit",disabled:x,children:x?"Saving...":r?"Save Changes":"Add Asset"})]})]})]})})}const se=()=>{const[l,m]=h.useState([]),[r,i]=h.useState(!1),[a,u]=h.useState(null),{toast:d}=S(),c=async()=>{try{const s=await p.getAssets();m(s.data||[])}catch(s){console.error("Failed to fetch assets",s)}};h.useEffect(()=>{c()},[]);const f=async s=>{try{a?(await p.updateAsset(a.id,s),d({title:"Success",description:"Asset updated successfully."})):(await p.addAsset(s),d({title:"Success",description:"Asset added successfully."})),i(!1),c()}catch{d({variant:"destructive",title:"Error",description:"Failed to save asset."})}},x=async s=>{if(confirm("Are you sure you want to delete this asset?"))try{await p.deleteAsset(s),d({title:"Success",description:"Asset deleted successfully."}),c()}catch{d({variant:"destructive",title:"Error",description:"Failed to delete asset."})}};return e.jsxs(w,{title:"ICT Assets",subtitle:"Hardware and Software Inventory",children:[e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex justify-between items-center",children:e.jsx("div",{className:"flex gap-2 ml-auto",children:e.jsxs(o,{onClick:()=>{u(null),i(!0)},className:"gap-2",children:[e.jsx(H,{className:"w-4 h-4"})," Add Asset"]})})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[l.map(s=>e.jsxs(k,{className:"hover:shadow-md transition-shadow group relative",children:[e.jsxs(F,{className:"flex flex-row items-start justify-between pb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"p-2 bg-primary/10 rounded-lg",children:e.jsx(C,{className:"h-5 w-5 text-primary"})}),e.jsxs("div",{children:[e.jsx(I,{className:"text-base font-semibold",children:s.type}),e.jsx("p",{className:"text-xs text-muted-foreground",children:s.serial_number})]})]}),e.jsx(M,{variant:s.status==="Active"?"default":"secondary",children:s.status})]}),e.jsxs(E,{children:[e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm mt-2",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Brand"}),e.jsx("p",{className:"font-medium",children:s.brand})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Model"}),e.jsx("p",{className:"font-medium",children:s.model})]}),e.jsxs("div",{className:"col-span-2 mt-2 pt-2 border-t",children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Assigned To"}),e.jsx("p",{className:"font-medium",children:s.assigned_to||"Unassigned"})]})]}),e.jsxs("div",{className:"flex justify-end gap-2 mt-4 opacity-0 group-hover:opacity-100 transition-opacity",children:[e.jsxs(o,{variant:"outline",size:"sm",onClick:()=>{u(s),i(!0)},children:[e.jsx(T,{className:"w-3 h-3 mr-1"})," Edit"]}),e.jsx(o,{variant:"destructive",size:"sm",onClick:()=>x(s.id),children:e.jsx(P,{className:"w-3 h-3"})})]})]})]},s.id)),l.length===0&&e.jsx("div",{className:"col-span-full py-12 text-center text-muted-foreground border-2 border-dashed rounded-lg",children:'No assets found. Click "Add Asset" to create one.'})]})]}),e.jsx(z,{open:r,onOpenChange:i,initialData:a,onSubmit:f})]})};export{se as default};
