import{R as A,j as e,r as h,d as S}from"./index-BM0IHp2M.js";import{c as w,M as C,B as T,n as k,T as F}from"./AdminLayout-CWUWmsnS.js";import{i as j}from"./ictService-aoQUuQEI.js";import{B as o,C as I,a as E,b as M,d as _}from"./card-DeprxXCB.js";import{u as B}from"./index.esm-DROA4wLU.js";import{D as R,a as q,b as V,c as L,d as P}from"./dialog-DCRhT7_F.js";import{I as p}from"./Combination-DWTH6IhY.js";import{L as n}from"./label-PzrI3jAD.js";import{S as f,a as v,b as N,c as y,d as t}from"./select-OA5PXWO7.js";import{P as H}from"./plus-BoDGEuOf.js";import"./index-yV4U6faZ.js";function z({open:l,onOpenChange:m,initialData:r,onSubmit:i}){const{register:a,handleSubmit:u,reset:d,setValue:c,formState:{errors:g,isSubmitting:x}}=B();return A.useEffect(()=>{l&&d(r||{status:"Active",type:"Desktop"})},[l,r,d]),e.jsx(R,{open:l,onOpenChange:m,children:e.jsxs(q,{children:[e.jsx(V,{children:e.jsx(L,{children:r?"Edit Asset":"Add New Asset"})}),e.jsxs("form",{onSubmit:u(i),className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{children:"Asset Type"}),e.jsxs(f,{onValueChange:s=>c("type",s),defaultValue:(r==null?void 0:r.type)||"Desktop",children:[e.jsx(v,{children:e.jsx(N,{placeholder:"Type"})}),e.jsxs(y,{children:[e.jsx(t,{value:"Laptop",children:"Laptop"}),e.jsx(t,{value:"Desktop",children:"Desktop"}),e.jsx(t,{value:"Server",children:"Server"}),e.jsx(t,{value:"Printer",children:"Printer"}),e.jsx(t,{value:"Mobile",children:"Mobile Device"}),e.jsx(t,{value:"Network",children:"Network Gear"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{htmlFor:"brand",children:"Brand"}),e.jsx(p,{id:"brand",...a("brand",{required:"Brand is required"})})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{htmlFor:"model",children:"Model"}),e.jsx(p,{id:"model",...a("model",{required:"Model is required"})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{htmlFor:"serial_number",children:"Serial Number"}),e.jsx(p,{id:"serial_number",...a("serial_number",{required:"Serial # is required"})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{htmlFor:"assigned_to",children:"Assigned To (Staff Name/ID)"}),e.jsx(p,{id:"assigned_to",...a("assigned_to"),placeholder:"Unassigned"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{children:"Status"}),e.jsxs(f,{onValueChange:s=>c("status",s),defaultValue:(r==null?void 0:r.status)||"Active",children:[e.jsx(v,{children:e.jsx(N,{placeholder:"Status"})}),e.jsxs(y,{children:[e.jsx(t,{value:"Active",children:"Active"}),e.jsx(t,{value:"Repair",children:"In Repair"}),e.jsx(t,{value:"Storage",children:"In Storage"}),e.jsx(t,{value:"Retired",children:"Retired"})]})]})]}),e.jsxs(P,{children:[e.jsx(o,{type:"button",variant:"outline",onClick:()=>m(!1),children:"Cancel"}),e.jsx(o,{type:"submit",disabled:x,children:x?"Saving...":r?"Save Changes":"Add Asset"})]})]})]})})}const $=()=>{const[l,m]=h.useState([]),[r,i]=h.useState(!1),[a,u]=h.useState(null),{toast:d}=S(),c=async()=>{try{const s=await j.getAssets();m(s.data||[])}catch(s){console.error("Failed to fetch assets",s)}};h.useEffect(()=>{c()},[]);const g=async s=>{try{a?(await j.updateAsset(a.id,s),d({title:"Success",description:"Asset updated successfully."})):(await j.addAsset(s),d({title:"Success",description:"Asset added successfully."})),i(!1),c()}catch{d({variant:"destructive",title:"Error",description:"Failed to save asset."})}},x=async s=>{if(confirm("Are you sure you want to delete this asset?"))try{await j.deleteAsset(s),d({title:"Success",description:"Asset deleted successfully."}),c()}catch{d({variant:"destructive",title:"Error",description:"Failed to delete asset."})}};return e.jsxs(w,{title:"ICT Assets",subtitle:"Hardware and Software Inventory",children:[e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex justify-between items-center",children:e.jsx("div",{className:"flex gap-2 ml-auto",children:e.jsxs(o,{onClick:()=>{u(null),i(!0)},className:"gap-2",children:[e.jsx(H,{className:"w-4 h-4"})," Add Asset"]})})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[l.map(s=>e.jsxs(I,{className:"hover:shadow-md transition-shadow group relative",children:[e.jsxs(E,{className:"flex flex-row items-start justify-between pb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"p-2 bg-primary/10 rounded-lg",children:e.jsx(C,{className:"h-5 w-5 text-primary"})}),e.jsxs("div",{children:[e.jsx(M,{className:"text-base font-semibold",children:s.type}),e.jsx("p",{className:"text-xs text-muted-foreground",children:s.serial_number})]})]}),e.jsx(T,{variant:s.status==="Active"?"default":"secondary",children:s.status})]}),e.jsxs(_,{children:[e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm mt-2",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Brand"}),e.jsx("p",{className:"font-medium",children:s.brand})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Model"}),e.jsx("p",{className:"font-medium",children:s.model})]}),e.jsxs("div",{className:"col-span-2 mt-2 pt-2 border-t",children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Assigned To"}),e.jsx("p",{className:"font-medium",children:s.assigned_to||"Unassigned"})]})]}),e.jsxs("div",{className:"flex justify-end gap-2 mt-4 opacity-0 group-hover:opacity-100 transition-opacity",children:[e.jsxs(o,{variant:"outline",size:"sm",onClick:()=>{u(s),i(!0)},children:[e.jsx(k,{className:"w-3 h-3 mr-1"})," Edit"]}),e.jsx(o,{variant:"destructive",size:"sm",onClick:()=>x(s.id),children:e.jsx(F,{className:"w-3 h-3"})})]})]})]},s.id)),l.length===0&&e.jsx("div",{className:"col-span-full py-12 text-center text-muted-foreground border-2 border-dashed rounded-lg",children:'No assets found. Click "Add Asset" to create one.'})]})]}),e.jsx(z,{open:r,onOpenChange:i,initialData:a,onSubmit:g})]})};export{$ as default};
