import{r as c,d as T,j as e}from"./index-D78T4imR.js";import{c as _,P as x,T as C,S as L,B as m}from"./AdminLayout-BtskhTy9.js";import{C as n,d as i,B as I}from"./card-C-gqQ2Kk.js";import{I as B}from"./Combination-_iD594Rc.js";import{T as q,a as E,b as h,c as l,d as P,e as a}from"./table-C3lzzPFT.js";import{p}from"./pharmacyService-CFsrIYuX.js";import{P as A}from"./plus-DSx3Cbm8.js";import{L as R}from"./loader-circle-B7-Z8OSf.js";const z=()=>{const[o,g]=c.useState([]),[N,y]=c.useState([]),[j,u]=c.useState(!0),[d,w]=c.useState(""),{toast:v}=T();c.useEffect(()=>{b()},[]);const b=async()=>{var s,t;try{u(!0);const[r,k]=await Promise.all([p.getAll({limit:100}),p.getLowStock().catch(()=>[])]);g(r.data||[]),y(k||[])}catch(r){v({title:"Error",description:((t=(s=r.response)==null?void 0:s.data)==null?void 0:t.message)||"Failed to load inventory",variant:"destructive"})}finally{u(!1)}},f=o.filter(s=>{var t,r;return((t=s.name)==null?void 0:t.toLowerCase().includes(d.toLowerCase()))||((r=s.item_code)==null?void 0:r.toLowerCase().includes(d.toLowerCase()))}),S=o.reduce((s,t)=>s+(t.stock_quantity*t.selling_price||0),0);return e.jsxs(_,{title:"Inventory",subtitle:"Manage hospital inventory and stock",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[e.jsx(n,{children:e.jsx(i,{className:"pt-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Items"}),e.jsx("p",{className:"text-3xl font-bold",children:o.length})]}),e.jsx(x,{className:"w-8 h-8 text-muted-foreground"})]})})}),e.jsx(n,{children:e.jsx(i,{className:"pt-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Stock"}),e.jsx("p",{className:"text-3xl font-bold",children:o.reduce((s,t)=>s+(t.stock_quantity||0),0)})]}),e.jsx(x,{className:"w-8 h-8 text-success"})]})})}),e.jsx(n,{children:e.jsx(i,{className:"pt-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Low Stock"}),e.jsx("p",{className:"text-3xl font-bold text-warning",children:N.length})]}),e.jsx(C,{className:"w-8 h-8 text-warning"})]})})}),e.jsx(n,{children:e.jsx(i,{className:"pt-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Value"}),e.jsxs("p",{className:"text-2xl font-bold",children:["ETB ",S.toLocaleString()]})]}),e.jsx(x,{className:"w-8 h-8 text-primary"})]})})})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-between mb-6",children:[e.jsxs("div",{className:"relative flex-1 max-w-md",children:[e.jsx(L,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground"}),e.jsx(B,{placeholder:"Search inventory...",className:"pl-10",value:d,onChange:s=>w(s.target.value)})]}),e.jsxs(I,{className:"gap-2",children:[e.jsx(A,{className:"w-4 h-4"}),"Add Item"]})]}),e.jsx(n,{children:e.jsx(i,{className:"p-0",children:j?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx(R,{className:"w-8 h-8 animate-spin text-muted-foreground"})}):e.jsxs(q,{children:[e.jsx(E,{children:e.jsxs(h,{children:[e.jsx(l,{children:"Code"}),e.jsx(l,{children:"Name"}),e.jsx(l,{children:"Category"}),e.jsx(l,{children:"Stock"}),e.jsx(l,{children:"Unit Price"}),e.jsx(l,{children:"Value"}),e.jsx(l,{children:"Status"})]})}),e.jsxs(P,{children:[f.map(s=>e.jsxs(h,{children:[e.jsx(a,{className:"font-mono text-sm",children:s.item_code}),e.jsx(a,{className:"font-medium",children:s.name}),e.jsx(a,{children:e.jsx(m,{variant:"secondary",children:s.category_name||"General"})}),e.jsx(a,{children:e.jsx(m,{variant:"outline",className:s.stock_quantity<=(s.min_stock_level||50)?"border-warning text-warning":"border-success text-success",children:s.stock_quantity})}),e.jsxs(a,{children:["ETB ",s.selling_price]}),e.jsxs(a,{children:["ETB ",(s.stock_quantity*s.selling_price).toLocaleString()]}),e.jsx(a,{children:e.jsx(m,{variant:s.stock_quantity>0?"default":"destructive",children:s.stock_quantity>0?"In Stock":"Out of Stock"})})]},s.id)),f.length===0&&!j&&e.jsx(h,{children:e.jsx(a,{colSpan:7,className:"text-center py-8 text-muted-foreground",children:"No items found"})})]})]})})})]})};export{z as default};
